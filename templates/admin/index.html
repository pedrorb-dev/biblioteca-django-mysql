{# templates/admin/index.html #}
{% extends "admin/base_site.html" %}
{% load static %}

{% block content %}
  <h2>Herramientas del Sistema</h2>

  <p>
    <a href="{% url 'custom_admin:backup-db' %}" class="button"
      style="display:inline-block;padding:8px 12px;background:#2980b9;color:#fff;border-radius:4px;text-decoration:none;">
      Descargar respaldo (ZIP)
    </a>
  </p>

  <hr>

  <h3>Restaurar respaldo (MySQL .sql)</h3>
  <p>{{ mysql_restore_help }}</p>

  <form method="post" action="{% url 'custom_admin:restore-db' %}" enctype="multipart/form-data" style="margin-top:10px;">
    {% csrf_token %}
    <input type="file" name="backup_file" accept=".sql,.zip" required>
    <button type="submit" style="margin-left:8px;padding:8px 12px;background:#28a745;color:#fff;border:none;border-radius:4px;">
      Restaurar respaldo
    </button>
  </form>

  {% if messages %}
    <ul style="margin-top:12px;">
      {% for m in messages %}
        <li{% if m.tags %} class="{{ m.tags }}"{% endif %}>{{ m }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  {{ block.super }}
{% endblock %}
